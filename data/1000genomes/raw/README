

aws s3 sync s3://1000genomes/phase3/ /francislab/data1/raw/1000genomes/phase3/ --exclude "*" --include "*/alignment/*.unmapped.ILLUMINA.bwa.*.*.*.bam"



Are all reads in unmapped, actually unmapped? 2 random checks say yes.


samtools view -c /francislab/data1/raw/1000genomes/phase3/data/HG00099/alignment/HG00099.unmapped.ILLUMINA.bwa.GBR.low_coverage.20130415.bam 
1147814

samtools view -f 4 -c /francislab/data1/raw/1000genomes/phase3/data/HG00099/alignment/HG00099.unmapped.ILLUMINA.bwa.GBR.low_coverage.20130415.bam 
1147814



samtools view -c /francislab/data1/raw/1000genomes/phase3/data/HG01286/alignment/HG01286.unmapped.ILLUMINA.bwa.PUR.low_coverage.20130415.bam
1664015

samtools view -f 4 -c /francislab/data1/raw/1000genomes/phase3/data/HG01286/alignment/HG01286.unmapped.ILLUMINA.bwa.PUR.low_coverage.20130415.bam
1664015





date=$( date "+%Y%m%d%H%M%S" )
dir=/francislab/data1/raw/1000genomes
qsub -N count -l nodes=1:ppn=4 -l vmem=8gb \
	-o ${dir}/count_unmapped_reads.${date}.out.txt \
	-e ${dir}/count_unmapped_reads.${date}.err.txt \
	${dir}/count_unmapped_reads.bash



OR

./samtools_count.bash
...  WAIT ...
./aggregate_unmapped_read_counts.bash




