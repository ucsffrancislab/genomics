
Only the raw hg38.fa.gz from 2018-08-10 from site.



ln -s hg38.fa hg38.chrXYM_alts.fa
samtools faidx hg38.chrXYM_alts.fa
chmod -w hg38.chrXYM_alts.fa hg38.chrXYM_alts.fa.fai

faSplit byname hg38.fa chromosomes/ 

sed 's/^>chr/>/' chromosomes/chr[1-9].fa chromosomes/chr[12][0-9].fa chromosomes/chr[XY].fa > hg38.numericXY_no_alts.fa
samtools faidx hg38.numericXY_no_alts.fa
chmod -w hg38.numericXY_no_alts.fa hg38.numericXY_no_alts.fa.fai

sed 's/^>chr/>/' chromosomes/chr[1-9].fa chromosomes/chr[12][0-9].fa chromosomes/chr[XYM].fa > hg38.numericXYM_no_alts.fa
samtools faidx hg38.numericXYM_no_alts.fa
chmod -w hg38.numericXYM_no_alts.fa hg38.numericXYM_no_alts.fa.fai

sed 's/^>chr/>/' chromosomes/chr[1-9].fa chromosomes/chr[12][0-9].fa chromosomes/chr[XY].fa > hg38.numericXYMT_no_alts.fa
sed '1s/^>chrM/>MT/' chromosomes/chrM.fa >> hg38.numericXYMT_no_alts.fa
samtools faidx hg38.numericXYMT_no_alts.fa
chmod -w hg38.numericXYMT_no_alts.fa hg38.numericXYMT_no_alts.fa.fai



cat chromosomes/chr[1-9].fa chromosomes/chr[12][0-9].fa chromosomes/chr[XYM].fa > hg38.chrXYM_no_alts.fa
samtools faidx hg38.chrXYM_no_alts.fa
chmod -w hg38.chrXYM_no_alts.fa hg38.chrXYM_no_alts.fa.fai



sbatch --time=3600 --ntasks=16 --mem=120G --job-name no_alts --output ${PWD}/no_alts.out.txt ${PWD}/bowtie2-build.bash --threads 16 ${PWD}/hg38.chrXYM_no_alts.fa ${PWD}/hg38.chrXYM_no_alts
sbatch --time=3600 --ntasks=16 --mem=120G --job-name alts --output ${PWD}/alts.out.txt ${PWD}/bowtie2-build.bash --threads 16 ${PWD}/hg38.chrXYM_alts.fa ${PWD}/hg38.chrXYM_alts



sbatch --time=3600 --ntasks=64 --mem=490G --job-name build --output ${PWD}/hg38.chrXYM_alts.viral.txt ${PWD}/bowtie2-build.bash --threads 64 ${PWD}/hg38.chrXYM_alts.fa.gz,/francislab/data1/refs/refseq/viral-20210916/viral.genomic.fna.gz ${PWD}/hg38.chrXYM_alts.viral


sbatch --time=3600 --ntasks=64 --mem=490G --job-name build --output ${PWD}/hg38.chrXYM_alts.dblmaskviral.txt ${PWD}/bowtie2-build.bash --threads 64 ${PWD}/hg38.chrXYM_alts.fa.gz,/francislab/data1/working/20211111-hg38-viral-homology/for_reference.fasta ${PWD}/hg38.chrXYM_alts.dblmaskviral



module load star/2.7.7a
sbatch --time=3600 --ntasks=32 --mem=240G --job-name alts --output ${PWD}/star.out.txt --wrap "STAR --runThreadN 32 --runMode genomeGenerate --genomeFastaFiles /francislab/data1/refs/sources/hgdownload.cse.ucsc.edu/goldenPath/hg38/bigZips/latest/hg38.chrXYM_alts.fa --genomeDir /francislab/data1/refs/sources/hgdownload.cse.ucsc.edu/goldenPath/hg38/bigZips/latest/hg38.chrXYM_alts-2.7.7a/"



